(function(e){function t(t){for(var n,o,r=t[0],l=t[1],c=t[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},i={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"16a2":function(e,t,a){"use strict";var n=a("7c6e"),i=a.n(n);i.a},"198d":function(e,t,a){},"2e45":function(e,t,a){"use strict";var n=a("7206"),i=a.n(n);i.a},"313b":function(e,t,a){},"3da5":function(e,t,a){},"3ec0":function(e,t,a){},"473b":function(e,t,a){"use strict";var n=a("dc91"),i=a.n(n);i.a},"4e69":function(e,t,a){},"55cf":function(e,t,a){"use strict";var n=a("198d"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Navbar"),a("v-content",{staticClass:"ma-6 grey lighten-5"},[a("router-view")],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("v-app-bar",{staticClass:"pr-5 blue darken-3",attrs:{flat:"","clipped-left":"",dark:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),a("v-toolbar-title",[a("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:{name:"home"},tag:"span"}},[a("span",{staticClass:"font-weight-bold headline"},[e._v("konferencje")])])],1),a("div",{staticClass:"flex-grow-1"}),e.user?e._e():a("v-btn",{attrs:{outlined:"",large:"",color:"white",to:{name:"logowanie"}}},[a("v-icon",{staticClass:"pr-2",attrs:{size:"28",left:""}},[e._v("mdi-account-circle")]),e._v("Logowanie\n    ")],1),e.user?a("v-btn",{staticClass:"mx-2",attrs:{small:"",icon:"",fab:"",to:{name:"dodaj_konferencje"}}},[a("v-icon",[e._v("mdi-calendar-plus")])],1):e._e(),e.user?a("v-menu",{attrs:{"offset-y":"","min-width":"300px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:"",small:"",fab:""}},n),[e.avatarSrc?a("v-avatar",{attrs:{size:"24"}},[a("img",{attrs:{src:e.avatarSrc,alt:"user's avatar"}})]):e._e()],1)]}}],null,!1,2316403161)},[a("v-list",[e.profil?a("v-list-item",{staticClass:"mb-2"},[a("v-avatar",{staticClass:"mr-4",attrs:{size:"40"}},[a("img",{attrs:{src:e.avatarSrc,alt:""}})]),a("v-list-item-title",[e._v(e._s(e.profil.username))])],1):e._e(),a("v-divider"),a("v-list-item",{attrs:{link:"",to:{name:"moje_konferencje"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-calendar-star")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Moje konferencje")])],1)],1),a("v-list-item",{attrs:{link:"",to:{name:"obserwowane_konferencje"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-star")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Obserwowane")])],1)],1),e.profil?a("v-list-item",{attrs:{link:"",to:{name:"profil",params:{username:e.profil.username}}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Profil")])],1)],1):e._e(),a("v-list-item",{attrs:{link:""},on:{click:e.logout}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-logout-variant")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Wyloguj")])],1)],1)],1)],1):e._e()],1),a("v-navigation-drawer",{attrs:{app:"",width:"260",clipped:"",color:"blue darken-3",dark:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:"",nav:""}},[a("v-list-item-group",[e.user&&e.isAdmin?a("v-list-item",{attrs:{to:{name:"admin_panel"},link:""}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-wrench")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Panel Administracyjny")])],1)],1):e._e(),a("v-list-item",{attrs:{exact:"",to:{name:"home"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-calendar")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Wydarzenia")])],1)],1),a("v-list-item",{attrs:{to:{name:"kalendarz"},link:""}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-calendar-month")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Kalendarz")])],1)],1)],1)],1)],1)],1)},r=[],l=a("8aa5"),c=a.n(l),d=(a("e71f"),{apiKey:"AIzaSyDBxFr9CexMI5-yvchO-diGgVei8D97MEY",authDomain:"konferencje-95600.firebaseapp.com",databaseURL:"https://konferencje-95600.firebaseio.com",projectId:"konferencje-95600",storageBucket:"gs://konferencje-95600.appspot.com",messagingSenderId:"777474069958",appId:"1:777474069958:web:c576fc89dc2c9588060ec7"});const u=c.a.initializeApp(d);var m=u.firestore(),p={data(){return{right:null,drawer:!0,user:null,isAdmin:null,profil:null,avatarSrc:"https://firebasestorage.googleapis.com/v0/b/konferencje-95600.appspot.com/o/avatars%2FdefaultAvatar.png?alt=media&token=f5fbdbef-b80e-41e5-bf48-e99b0d6f91a6"}},methods:{logout(){c.a.auth().signOut().then(()=>{this.$router.push({name:"logowanie"})})}},created(){c.a.auth().onAuthStateChanged(e=>{e?(this.user=e,m.collection("users").where("user_id","==",e.uid).get().then(e=>{e.forEach(e=>{this.profil=e.data(),this.profil.logo&&(this.avatarSrc=this.profil.logo)})}),e.getIdTokenResult().then(e=>{this.isAdmin=e.claims.admin})):this.user=null}),Ia.$on("updateAvatar",e=>{this.avatarSrc=e})}},f=p,h=a("2877"),v=a("6544"),_=a.n(v),g=a("40dc"),b=a("5bc1"),k=a("8212"),w=a("8336"),x=a("ce7e"),C=a("132d"),y=a("8860"),D=a("da13"),V=a("5d23"),j=a("1baa"),S=a("34c3"),I=a("e449"),z=a("f774"),$=a("2a7f"),T=Object(h["a"])(f,o,r,!1,null,null,null),E=T.exports;_()(T,{VAppBar:g["a"],VAppBarNavIcon:b["a"],VAvatar:k["a"],VBtn:w["a"],VDivider:x["a"],VIcon:C["a"],VList:y["a"],VListItem:D["a"],VListItemContent:V["a"],VListItemGroup:j["a"],VListItemIcon:S["a"],VListItemTitle:V["b"],VMenu:I["a"],VNavigationDrawer:z["a"],VToolbarTitle:$["a"]});var A={name:"App",components:{Navbar:E}},O=A,P=a("7496"),L=a("a75b"),N=Object(h["a"])(O,i,s,!1,null,null,null),R=N.exports;_()(N,{VApp:P["a"],VContent:L["a"]});var B=a("8c4f"),U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"grey lighten-5"},[a("v-progress-linear",{staticClass:"mb-4",attrs:{active:e.loading,indeterminate:e.loading,color:"blue accent-4"}}),a("div",{staticClass:"d-flex justify-space-between"},[a("h2",{staticClass:"mb-3 subtitle-1 font-weight-black"},[e._v("Lista konferencji")]),a("div",{staticClass:"category_box"},[a("v-autocomplete",{attrs:{items:e.items,label:"Kategoria",solo:"",flat:""},on:{change:e.sortByCategory},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)]),a("v-row",e._l(e.conferences,(function(e,t){return a("v-col",{key:t,attrs:{cols:"12",xs:"12",md:"4",xl:"3"}},[a("ConferenceThumbnail",{attrs:{conference:e}})],1)})),1)],1)},F=[],M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"conference_thumbnail"},[a("v-card",{staticClass:"mx-auto"},[e._t("floating-btn"),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title font-weight-regular mt-2"},[e._v(e._s(e.conference.title))]),a("p",{staticClass:"pb-2 caption"},[e._v("\n          "+e._s(e._f("dateFilter")(e.conference.start_date.toDate()))+"\n          "),e.notOneDay?a("span",[e._v("- "+e._s(e._f("dateFilter")(e.conference.end_date.toDate())))]):e._e()]),a("v-divider",{staticClass:"blue lighten-1"}),a("div",{staticClass:"location d-flex pt-2 pb-2 caption font-weight-medium grey--text"},[a("div",{staticClass:"location__icon"},[a("v-icon",[e._v("mdi-map-marker")])],1),a("div",{staticClass:"d-flex flex-column ml-1"},[a("div",{staticClass:"location__name"},[e._v(e._s(e.conference.address))]),a("div",{staticClass:"location__link"},[a("a",{staticClass:"font-weight-medium",attrs:{href:e.conference.link,target:"_blank"}},[e._v("zobacz na mapie")])])])])],1)],1),a("v-img",{attrs:{src:e.conference.logo,"aspect-ratio":"16/9",height:"200"}}),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",to:{name:"konferencja",params:{conference_id:e.conference.id}},color:"blue accent-4"}},[e._v("więcej informacji")])],1)],2)],1)},q=[],G={props:["conference"],data(){return{notOneDay:!0}},created(){let e=this.conference.start_date.toDate(),t=this.conference.end_date.toDate();e.toISOString().substring(0,10)==t.toISOString().substring(0,10)&&(this.notOneDay=!1)}},W=G,Z=(a("d4e0"),a("b0af")),K=a("99d9"),H=a("adda"),X=Object(h["a"])(W,M,q,!1,null,null,null),Q=X.exports;_()(X,{VBtn:w["a"],VCard:Z["a"],VCardActions:K["a"],VDivider:x["a"],VIcon:C["a"],VImg:H["a"],VListItem:D["a"],VListItemContent:V["a"],VListItemTitle:V["b"]});var J=a("bc3a"),Y=a.n(J),ee={components:{ConferenceThumbnail:Q},data(){return{conferences:[],items:[],loading:!0,selected:null}},created(){this.getConferences(),this.getCategories();let e=new Date(1e3*c.a.firestore.Timestamp.now().seconds);console.log(e)},methods:{sortByCategory(){this.selected&&(this.loading=!0,"Wszystkie kategorie"===this.selected?this.getConferences():m.collection("conferences").where("category_id","==",this.selected).where("isAccepted","==",!0).where("end_date",">",c.a.firestore.Timestamp.now()).orderBy("end_date","asc").orderBy("start_date","asc").get().then(async e=>{let t=[];e.forEach(e=>{let a=e.data();a.id=e.id,t.push(a)});for(let a in t){const e=Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t[a].location.latitude+","+t[a].location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g");let n=await e;t[a].address=n.data.results[0].formatted_address;const i=`https://maps.google.com/?q=${t[a].location.latitude},${t[a].location.longitude}`;t[a].link=i}this.conferences=t,this.loading=!1}))},getConferences(){m.collection("conferences").where("isAccepted","==",!0).where("end_date",">",c.a.firestore.Timestamp.now()).orderBy("end_date","asc").orderBy("start_date","asc").get().then(async e=>{let t=[];e.forEach(e=>{let a=e.data();a.id=e.id,t.push(a)});for(let a in t){const e=Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t[a].location.latitude+","+t[a].location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g");let n=await e;t[a].address=n.data.results[0].formatted_address;const i=`https://maps.google.com/?q=${t[a].location.latitude},${t[a].location.longitude}`;t[a].link=i}this.conferences=t,this.loading=!1})},getCategories(){m.collection("categories").get().then(e=>{this.items.push("Wszystkie kategorie"),e.forEach(e=>{this.items.push(e.id)})})}}},te=ee,ae=(a("cccb"),a("c6a6")),ne=a("62ad"),ie=a("a523"),se=a("8e36"),oe=a("0fd9"),re=Object(h["a"])(te,U,F,!1,null,null,null),le=re.exports;_()(re,{VAutocomplete:ae["a"],VCol:ne["a"],VContainer:ie["a"],VProgressLinear:se["a"],VRow:oe["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login mt-12"},[a("v-snackbar",{attrs:{color:e.color,top:"",timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("div",[a("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.icon))]),e._v("\n      "+e._s(e.text)+"\n    ")],1),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card",{staticClass:"login__card pa-5",attrs:{"max-width":"600px"}},[a("v-card-title",{staticClass:"justify-center"},[a("h2",[e._v("Logowanie")])]),a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"Hasło",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("p",{staticClass:"text-left font-weight-medium"},[a("a",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("Przypomnij hasło")])]),e.feedback?a("p",{staticClass:"red--text"},[e._v(e._s(e.feedback))]):e._e(),a("v-btn",{staticClass:"ma-3",attrs:{color:"blue",type:"submit",large:"",dark:""}},[e._v("Zaloguj się")]),a("br"),a("br"),a("hr"),a("v-btn",{staticClass:"ma-3 mt-10",attrs:{color:"blue",outlined:"",to:{name:"rejestracja"}}},[e._v("Załóż konto")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("ResetPassword",{on:{resetPasswordSent:e.setSnackbar}})],1)],1)},de=[],ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reset-password"},[a("v-card",{staticClass:"login__card pa-5",attrs:{"max-width":"500px"}},[a("v-card-title",{staticClass:"justify-center"},[a("h2",[e._v("Zresetuj hasło")])]),a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.reset(t)}}},[a("p",{staticClass:"mt-3 pl-10 pr-10 font-weight-bold"},[e._v("Aby zresetować hasło, podaj adres email swojego konta, zostanie na niego wysłany link resetujący hasło")]),a("v-text-field",{attrs:{label:"Email",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-btn",{staticClass:"ma-3",attrs:{color:"blue",type:"submit",large:"",dark:""}},[e._v("Wyślij")])],1)],1)],1),a("v-snackbar",{attrs:{color:e.color,top:"",timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("div",[a("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.icon))]),e._v("\n      "+e._s(e.text)+"\n    ")],1),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],1)},me=[],pe={props:["uemail"],data(){return{email:"",snackbar:!1,color:"",icon:"",text:"",timeout:5e3}},created(){this.uemail&&(this.email=this.uemail)},methods:{reset(){const e=c.a.auth();this.email?(this.feedback="",e.sendPasswordResetEmail(this.email).then(()=>{this.email="",this.$emit("resetPasswordSent")}).catch(e=>{switch(this.color="error",this.icon="mdi-alert-circle",this.text="Błąd! Nie udało się wysłać wiadomości",this.snackbar=!0,e.message){case"There is no user record corresponding to this identifier. The user may have been deleted.":this.text="Konto o podanym adresie nie istnieje!";break;case"The email address is badly formatted.":this.text="Nie poprawny adres email!";break}})):(this.color="error",this.icon="mdi-alert-circle",this.text="Podaj adres email!",this.snackbar=!0)}}},fe=pe,he=a("4bd4"),ve=a("2db4"),_e=a("8654"),ge=Object(h["a"])(fe,ue,me,!1,null,null,null),be=ge.exports;_()(ge,{VBtn:w["a"],VCard:Z["a"],VCardText:K["b"],VCardTitle:K["c"],VForm:he["a"],VIcon:C["a"],VSnackbar:ve["a"],VTextField:_e["a"]});var ke={components:{ResetPassword:be},data(){return{email:null,password:null,feedback:null,dialog:!1,snackbar:!1,color:"",icon:"",text:"",timeout:5e3}},methods:{login(){this.email&&this.password?(c.a.auth().signInWithEmailAndPassword(this.email,this.password).then(e=>{this.$router.push({name:"home"})}).catch(e=>{this.feedback=e.message}),this.feedback=null):this.feedback="Wypełnij wszystkie pola"},setSnackbar(){this.dialog=!1,this.color="success",this.icon="mdi-check-circle",this.text="Pomyślnie wysłano wiadomość!",this.snackbar=!0}}},we=ke,xe=(a("6887"),a("169a")),Ce=Object(h["a"])(we,ce,de,!1,null,null,null),ye=Ce.exports;_()(Ce,{VBtn:w["a"],VCard:Z["a"],VCardText:K["b"],VCardTitle:K["c"],VDialog:xe["a"],VForm:he["a"],VIcon:C["a"],VSnackbar:ve["a"],VTextField:_e["a"]});var De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register mt-12"},[a("v-card",{staticClass:"register__card pa-5",attrs:{"max-width":"600px"}},[a("v-card-title",{staticClass:"justify-center"},[a("h2",[e._v("Rejestracja")])]),a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[a("v-text-field",{attrs:{type:"email",label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{type:"password",label:"Hasło"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{type:"text",label:"Nazwa użytkownika"},on:{keyup:e.isUsernameValid},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("p",{staticClass:"body-1 red--text",attrs:{id:"unFeedback"}},[e._v(e._s(e.usernameFeedback))]),a("p",{staticClass:"body-1 red--text"},[e._v(e._s(e.feedback))]),a("v-btn",{staticClass:"ma-3",attrs:{type:"submit",color:"blue",large:"",dark:""}},[e._v("Zarejestruj się")]),a("br"),a("br")],1),a("hr"),a("v-btn",{staticClass:"ma-3 mt-10",attrs:{color:"blue",outlined:"",to:{name:"logowanie"}}},[e._v("Logowanie")])],1)],1)],1)},Ve=[],je={data(){return{email:null,password:null,username:null,feedback:null,usernameFeedback:null}},methods:{isUsernameValid(){return this.username?(m.collection("users").where("username","==",this.username).get().then(e=>{e.forEach(e=>{return this.usernameFeedback="Nazwa użytkownika zajęta!",!0})}),this.usernameFeedback="",!1):(this.usernameFeedback="Nie podano nazwy użytkownika!",!0)},signup(){this.email&&this.password&&!this.isUsernameValid()?c.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(e=>{m.collection("users").doc(e.user.uid).set({user_id:e.user.uid,username:this.username}).then(()=>{this.$router.push({name:"home"})})}).catch(e=>{this.feedback=e.message}):this.feedback="Wszystkie pola muszą być wypełnione"}}},Se=je,Ie=(a("16a2"),Object(h["a"])(Se,De,Ve,!1,null,null,null)),ze=Ie.exports;_()(Ie,{VBtn:w["a"],VCard:Z["a"],VCardText:K["b"],VCardTitle:K["c"],VForm:he["a"],VTextField:_e["a"]});var $e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new_conference mt-12"},[a("v-card",{staticClass:"register__card pa-5",attrs:{"max-width":"900px"}},[a("v-card-title",{staticClass:"justify-center"},[a("h2",{staticClass:"headline mb-5"},[e._v("Nowa konferencja")])]),a("v-card-text",[a("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.addConference(t)}}},[a("v-textarea",{attrs:{outlined:"","auto-grow":"",label:"Tytuł",rows:"1",rules:[e.rules.required]},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("v-autocomplete",{attrs:{items:e.categories,label:"Kategoria",outlined:"",rules:[e.rules.required]},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}}),a("div",{staticClass:"editor mb-8"},[a("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1),a("v-text-field",{attrs:{rules:[e.rules.www],label:"Adres WWW",outlined:"",hint:"adres URL musi rozpoczynać się od https:// np. https://www.google.pl/"},model:{value:e.website,callback:function(t){e.website=t},expression:"website"}}),a("div",{staticClass:"test"},[a("v-autocomplete",{staticClass:"mb-5",attrs:{label:"Lokalizacja",loading:e.loading,items:e.items,"search-input":e.search,"return-object":!0,"item-text":"name","no-filter":"","auto-select-first":"",flat:"",outlined:"","hide-no-data":"","hide-details":"",clearable:"","append-icon":"mdi-map-search-outline",rules:[e.rules.required]},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1),a("v-row",[a("v-col",{staticClass:"pb-0 ma-0",attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.start_date,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.start_date=t},"update:return-value":function(t){e.start_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Data rozpoczęcia","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.start_date,callback:function(t){e.start_date=t},expression:"start_date"}},n))]}}]),model:{value:e.start_date_menu,callback:function(t){e.start_date_menu=t},expression:"start_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.start_date,callback:function(t){e.start_date=t},expression:"start_date"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.start_date_menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.start_date_menu.save(e.start_date)}}},[e._v("OK")])],1)],1)],1),a("v-col",{staticClass:"pb-0 ma-0",attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"start_time_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.start_time,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.start_time=t},"update:return-value":function(t){e.start_time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Godzina rozpoczęcia","prepend-inner-icon":"mdi-clock-outline",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.start_time,callback:function(t){e.start_time=t},expression:"start_time"}},n))]}}]),model:{value:e.start_time_menu,callback:function(t){e.start_time_menu=t},expression:"start_time_menu"}},[e.start_time_menu?a("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.$refs.start_time_menu.save(e.start_time)}},model:{value:e.start_time,callback:function(t){e.start_time=t},expression:"start_time"}}):e._e()],1)],1)],1),a("v-row",[a("v-col",{staticClass:"pb-0 pt-0 ma-0",attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"end_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.end_date,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.end_date=t},"update:return-value":function(t){e.end_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Data zakończenia","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.end_date,callback:function(t){e.end_date=t},expression:"end_date"}},n))]}}]),model:{value:e.end_date_menu,callback:function(t){e.end_date_menu=t},expression:"end_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.end_date,callback:function(t){e.end_date=t},expression:"end_date"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.end_date_menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.end_date_menu.save(e.end_date)}}},[e._v("OK")])],1)],1)],1),a("v-col",{staticClass:"pb-0 pt-0 ma-0",attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"end_time_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.end_time,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.end_time=t},"update:return-value":function(t){e.end_time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Godzina zakończenia","prepend-inner-icon":"mdi-clock-outline",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}},n))]}}]),model:{value:e.end_time_menu,callback:function(t){e.end_time_menu=t},expression:"end_time_menu"}},[e.end_time_menu?a("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.$refs.end_time_menu.save(e.end_time)}},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}}):e._e()],1)],1)],1),a("v-file-input",{attrs:{"show-size":"",label:"Wybierz logo","prepend-icon":"","prepend-inner-icon":"mdi-camera",outlined:"",rules:[e.rules.required]},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),a("v-card",{staticClass:"mx-auto mb-10",attrs:{"max-width":"840"}},[a("h3",{staticClass:"elevation-1 pt-4 pb-4 title font-weight-regular text-center mb-3"},[e._v("Ważne terminy")]),e._l(e.importantDates,(function(t,n){return a("div",{key:n},[a("ImportantDate",{attrs:{importantDate:t}},[a("div",{attrs:{slot:"number"},slot:"number"},[e._v(e._s(n+1))]),a("div",{attrs:{slot:"delete-btn"},slot:"delete-btn"},[a("v-icon",{attrs:{color:"darken-2"},on:{click:function(t){return e.deleteImportantDate(n)}}},[e._v("mdi-delete")])],1)])],1)})),a("v-card",{staticClass:"pt-5 elevation-1"},[a("div",{staticClass:"ml-4 mt-4 mr-4 pt-4"},[a("v-text-field",{attrs:{label:"Nazwa",outlined:""},model:{value:e.id_name,callback:function(t){e.id_name=t},expression:"id_name"}}),a("v-menu",{ref:"id_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.id_date,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.id_date=t},"update:return-value":function(t){e.id_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({staticClass:"date_field",attrs:{label:"Data","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:""},model:{value:e.id_date,callback:function(t){e.id_date=t},expression:"id_date"}},n))]}}]),model:{value:e.id_date_menu,callback:function(t){e.id_date_menu=t},expression:"id_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.id_date,callback:function(t){e.id_date=t},expression:"id_date"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.id_date_menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.id_date_menu.save(e.id_date)}}},[e._v("OK")])],1)],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mb-5",attrs:{text:"",color:"blue accent-4"},on:{click:e.addImportantDate}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-plus")]),e._v("Dodaj termin\n              ")],1)],1)],1)],2),a("p",{staticStyle:{"font-size":"30px",color:"red"},attrs:{id:"feedback"}},[e._v(e._s(e.feedback))]),a("v-btn",{staticClass:"ma-3",attrs:{type:"submit",color:"blue",large:"",dark:""}},[e._v("Dodaj konferencje")]),a("br"),a("br")],1)],1)],1)],1)},Te=[],Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto elevation-3",attrs:{"max-width":"840"}},[a("div",{staticClass:"d-flex justify-space-between pl-5 pr-4 pt-4 pb-1 mb-2"},[a("div",[e._t("number")],2),a("div",[e._t("delete-btn")],2)]),a("hr"),a("div",{staticClass:"ma-4"},[a("v-text-field",{attrs:{label:"Nazwa",outlined:"",rules:[e.rules.required]},model:{value:e.importantDate.name,callback:function(t){e.$set(e.importantDate,"name",t)},expression:"importantDate.name"}}),a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.importantDate.deadline,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.importantDate,"deadline",t)},"update:return-value":function(t){return e.$set(e.importantDate,"deadline",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({staticClass:"test2",attrs:{label:"Data","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.importantDate.deadline,callback:function(t){e.$set(e.importantDate,"deadline",t)},expression:"importantDate.deadline"}},n))]}}]),model:{value:e.start_date_menu,callback:function(t){e.start_date_menu=t},expression:"start_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.importantDate.deadline,callback:function(t){e.$set(e.importantDate,"deadline",t)},expression:"importantDate.deadline"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.start_date_menu.save(e.importantDate.deadline)}}},[e._v("OK")])],1)],1)],1)])},Ae=[],Oe={props:["importantDate"],data(){return{start_time_menu:!1,start_date_menu:!1,rules:{required:e=>!!e||"pole wymagane"}}}},Pe=Oe,Le=(a("2e45"),a("2e4b")),Ne=Object(h["a"])(Pe,Ee,Ae,!1,null,null,null),Re=Ne.exports;_()(Ne,{VBtn:w["a"],VCard:Z["a"],VDatePicker:Le["a"],VMenu:I["a"],VTextField:_e["a"]});var Be=a("3730"),Ue=a.n(Be),Fe=a("fb3d"),Me=a.n(Fe),qe=(a("91b8"),{components:{ImportantDate:Re,ckeditor:Ue.a.component},data(){return{title:null,start_date:null,start_time:null,id_name:null,id_date:null,end_date:null,end_time:null,location:null,logo:null,isAccepted:!1,feedback:null,modal:!0,start_date_menu:!1,id_date_menu:!1,end_date_menu:!1,start_time_menu:!1,end_time_menu:!1,image:null,loading:!1,items:[],search:null,select:null,candidates:[],loading:!1,selectedCategory:null,categories:[],website:null,importantDates:[],editor:Me.a,editorData:null,editorConfig:{language:{ui:"pl",content:"pl"},placeholder:"Opis konferencji"},rules:{required:e=>!!e||"pole wymagane",counter:e=>e.length<=100||"maksymalnie 100 znaków",www:e=>{const t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)/gi;return t.test(e)||"adres URL musi rozpoczynać się od https:// np. https://www.google.pl/"}}}},created(){this.getCategories()},watch:{search(e){e&&e!==this.select&&this.querySelections(e)}},computed:{preparedStartDate(){const e=new Date(this.start_date);if("string"===typeof this.start_time){let t=this.start_time.match(/^(\d+)/)[1],a=this.start_time.match(/:(\d+)/)[1];e.setHours(t),e.setMinutes(a)}else e.setHours(this.start_time.getHours()),e.setMinutes(this.start_time.getMinutes());return e},preparedEndDate(){const e=new Date(this.end_date);if("string"===typeof this.end_time){let t=this.end_time.match(/^(\d+)/)[1],a=this.end_time.match(/:(\d+)/)[1];e.setHours(t),e.setMinutes(a)}else e.setHours(this.end_time.getHours()),e.setMinutes(this.end_time.getMinutes());return e}},methods:{addImportantDate(){let e={};e.name=this.id_name,e.deadline=this.id_date,this.id_name=null,this.id_date=null,this.importantDates.push(e)},deleteImportantDate(e){this.importantDates.pop(e)},addConference(){if(this.$refs.form.validate()){const e=this.select.geometry.location.lat(),t=this.select.geometry.location.lng(),a=new c.a.firestore.GeoPoint(e,t);let n=c.a.auth().currentUser;this.$admin&&(this.isAccepted=!0),m.collection("conferences").add({isAccepted:this.isAccepted,title:this.title,category_id:this.selectedCategory,website:this.website,description:this.editorData,location:a,start_date:c.a.firestore.Timestamp.fromDate(this.preparedStartDate),end_date:c.a.firestore.Timestamp.fromDate(this.preparedEndDate),user_id:n.uid}).then(e=>{const t=e.id;for(let a in this.importantDates)m.collection("conferences").doc(t).collection("important_dates").add({name:this.importantDates[a].name,important_date:new Date(this.importantDates[a].deadline)}).then(e=>{console.log(e)});if(this.image){const a=this.image.name,n=a.substring(a.lastIndexOf("."),a.length);c.a.storage().ref("conferences/"+e.id+n).put(this.image).then(e=>{e.ref.getDownloadURL().then(e=>{m.collection("conferences").doc(t).update({logo:e}).then(e=>{console.log("pomyslnie dodano konferencje"),this.$router.push({name:"moje_konferencje"})})})})}else m.collection("conferences").doc(t).set({logo:"https://firebasestorage.googleapis.com/v0/b/konferencje-95600.appspot.com/o/conferences%2FdefaultLogo.png?alt=media&token=c034e5d6-e95d-4322-ae41-a8dc95cad9f9"},{merge:!0}).then(e=>{console.log("pomyslnie dodano konferencje"),this.$router.push({name:"moje_konferencje"})})}).catch(e=>{console.log(e)})}},querySelections(e){const t=new google.maps.places.PlacesService(document.createElement("div"));t.textSearch({query:e,fields:["name","geometry","formatted_address"]},(e,t)=>{t===google.maps.places.PlacesServiceStatus.OK&&(this.items=e,this.items.forEach(e=>{e.name=`${e.name}, ${e.formatted_address}`}))})},getCategories(){m.collection("categories").get().then(e=>{e.forEach(e=>{this.categories.push(e.id)})})}}}),Ge=qe,We=(a("b2fe"),a("23a7")),Ze=a("a844"),Ke=a("c964"),He=Object(h["a"])(Ge,$e,Te,!1,null,null,null),Xe=He.exports;_()(He,{VAutocomplete:ae["a"],VBtn:w["a"],VCard:Z["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCol:ne["a"],VDatePicker:Le["a"],VFileInput:We["a"],VForm:he["a"],VIcon:C["a"],VMenu:I["a"],VRow:oe["a"],VTextField:_e["a"],VTextarea:Ze["a"],VTimePicker:Ke["b"]});var Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit_conference"},[a("v-card",{staticClass:"register__card pa-5",attrs:{"max-width":"900px"}},[a("v-card-title",{staticClass:"justify-center"},[a("h3",{staticClass:"mb-5 headline"},[e._v("Edycja konferencji")])]),a("v-card-text",[a("v-form",{ref:"edit_form",on:{submit:function(t){return t.preventDefault(),e.updateConference(t)}}},[a("v-textarea",{attrs:{outlined:"","auto-grow":"",label:"Tytuł",rows:"1",rules:[e.rules.required]},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("v-autocomplete",{attrs:{items:e.categories,label:"Kategoria",outlined:"",rules:[e.rules.required]},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}}),a("div",{staticClass:"editor mb-8"},[a("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1),a("v-text-field",{attrs:{rules:[e.rules.www],label:"Adres WWW",outlined:"",hint:"adres URL musi rozpoczynać się od https:// np. https://www.google.pl/"},model:{value:e.website,callback:function(t){e.website=t},expression:"website"}}),a("h2",{staticClass:"mt-4"},[e._v("Lokalizacja")]),a("div",{staticClass:"pt-2 pb-2 mb-2 body-1 font-weight-medium"},[a("v-icon",[e._v("mdi-map-marker")]),e._v("\n          "+e._s(e.location)+"\n          "),a("v-spacer"),a("a",{attrs:{href:e.location_link,target:"_blank"}},[e._v("zobacz na mapie")])],1),a("v-autocomplete",{attrs:{label:"Wybierz nową lokalizację",loading:e.loading,items:e.items,"search-input":e.search,"return-object":!0,"item-text":"name","no-filter":"",flat:"","hide-no-data":"","hide-details":"",clearable:"","append-icon":"",outlined:"","prepend-inner-icon":"mdi-map-search-outline"},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}}),a("h2",{staticClass:"mt-10"},[e._v("Data rozpoczęcia")]),a("v-row",{staticClass:"mt-2"},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"start_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.start_date,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.start_date=t},"update:return-value":function(t){e.start_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Data rozpoczęcia","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.start_date,callback:function(t){e.start_date=t},expression:"start_date"}},n))]}}]),model:{value:e.start_date_menu,callback:function(t){e.start_date_menu=t},expression:"start_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.start_date,callback:function(t){e.start_date=t},expression:"start_date"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.start_date_menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.start_date_menu.save(e.start_date)}}},[e._v("OK")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"start_time_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.start_time,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.start_time=t},"update:return-value":function(t){e.start_time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Godzina rozpoczęcia","prepend-inner-icon":"mdi-clock-outline",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.start_time,callback:function(t){e.start_time=t},expression:"start_time"}},n))]}}]),model:{value:e.start_time_menu,callback:function(t){e.start_time_menu=t},expression:"start_time_menu"}},[e.start_time_menu?a("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.$refs.start_time_menu.save(e.start_time)}},model:{value:e.start_time,callback:function(t){e.start_time=t},expression:"start_time"}}):e._e()],1)],1)],1),a("h2",{},[e._v("Data zakończenia")]),a("v-row",{staticClass:"mt-2"},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"end_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.end_date,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.end_date=t},"update:return-value":function(t){e.end_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Data zakończenia","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.end_date,callback:function(t){e.end_date=t},expression:"end_date"}},n))]}}]),model:{value:e.end_date_menu,callback:function(t){e.end_date_menu=t},expression:"end_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.end_date,callback:function(t){e.end_date=t},expression:"end_date"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.end_date_menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.end_date_menu.save(e.end_date)}}},[e._v("OK")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-menu",{ref:"end_time_menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.end_time,transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.end_time=t},"update:return-value":function(t){e.end_time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Godzina zakończenia","prepend-inner-icon":"mdi-clock-outline",readonly:"",outlined:"",rules:[e.rules.required]},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}},n))]}}]),model:{value:e.end_time_menu,callback:function(t){e.end_time_menu=t},expression:"end_time_menu"}},[e.end_time_menu?a("v-time-picker",{attrs:{format:"24hr","full-width":""},on:{"click:minute":function(t){return e.$refs.end_time_menu.save(e.end_time)}},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}}):e._e()],1)],1)],1),a("h2",{staticClass:"mt-5 mb-5"},[e._v("Aktualne logo")]),a("v-img",{staticClass:"elevation-3 mb-6",attrs:{src:e.logo,"max-width":"100%",height:"auto"}}),a("v-file-input",{attrs:{"show-size":"",label:"Wybierz nowe logo","prepend-inner-icon":"mdi-camera","prepend-icon":"",outlined:""},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),a("v-card",{staticClass:"mx-auto mb-10",attrs:{"max-width":"840"}},[a("h3",{staticClass:"elevation-1 pt-4 pb-4 title font-weight-regular text-center mb-3"},[e._v("\n            Ważne terminy\n          ")]),e._l(e.importantDates,(function(t,n){return a("div",{key:n},[a("ImportantDate",{attrs:{importantDate:t}},[a("div",{attrs:{slot:"number"},slot:"number"},[e._v(e._s(n+1))]),a("div",{attrs:{slot:"delete-btn"},slot:"delete-btn"},[a("v-icon",{attrs:{color:"darken-2"},on:{click:function(t){return e.deleteImportantDate(n)}}},[e._v("mdi-delete")])],1)])],1)})),a("v-card",{staticClass:"pt-5 elevation-1"},[a("div",{staticClass:"ml-4 mt-4 mr-4 pt-4"},[a("v-text-field",{attrs:{label:"Nazwa",outlined:""},model:{value:e.id_name,callback:function(t){e.id_name=t},expression:"id_name"}}),a("v-menu",{ref:"id_date_menu",attrs:{"close-on-content-click":!1,"return-value":e.id_date,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.id_date=t},"update:return-value":function(t){e.id_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({staticClass:"test2",attrs:{label:"Data","prepend-inner-icon":"mdi-calendar",readonly:"",outlined:""},model:{value:e.id_date,callback:function(t){e.id_date=t},expression:"id_date"}},n))]}}]),model:{value:e.id_date_menu,callback:function(t){e.id_date_menu=t},expression:"id_date_menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.id_date,callback:function(t){e.id_date=t},expression:"id_date"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.id_date_menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.id_date_menu.save(e.id_date)}}},[e._v("OK")])],1)],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"mb-5",attrs:{text:"",color:"blue accent-4"},on:{click:e.addImportantDate}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-plus")]),e._v("Dodaj termin\n              ")],1)],1)],1)],2),a("p",{staticStyle:{"font-size":"30px",color:"red"},attrs:{id:"feedback"}},[e._v(e._s(e.feedback))]),a("v-btn",{staticClass:"ma-3",attrs:{type:"submit",color:"blue",large:"",dark:""}},[e._v("Zapisz konferencje")]),a("br"),a("br")],1)],1)],1),a("v-snackbar",{attrs:{color:e.color,top:"",timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("div",[a("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.icon))]),e._v("\n      "+e._s(e.text)+"\n    ")],1),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],1)},Je=[],Ye={components:{ImportantDate:Re,ckeditor:Ue.a.component},data(){return{id:null,title:null,start_date:null,start_time:null,id_name:null,id_date:null,end_date:null,end_time:null,location:null,location_link:null,description:null,logo:"",feedback:null,modal:!0,id_date_menu:!1,start_date_menu:!1,end_date_menu:!1,start_time_menu:!1,end_time_menu:!1,image:null,loading:!1,items:[],search:null,select:null,candidates:[],selectedCategory:null,categories:[],website:null,isAccepted:!1,importantDates:[],editor:Me.a,editorData:null,editorConfig:{language:{ui:"pl",content:"pl"},placeholder:"Opis konferencji"},rules:{required:e=>!!e||"pole wymagane",counter:e=>e.length<=100||"maksymalnie 100 znaków",www:e=>{const t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)/gi;return t.test(e)||"adres URL musi rozpoczynać się od https:// np. https://www.google.pl/"}},snackbar:!1,color:"",icon:"",text:"",timeout:5e3}},created(){this.id=this.$route.params.conference_id;let e=m.collection("conferences").doc(this.$route.params.conference_id);this.getCategories(),e.get().then(e=>{if(e.exists){let t=e.data();this.title=t.title,this.selectedCategory=t.category_id,this.website=t.website,this.editorData=t.description,this.convertedStartDate(t.start_date),this.convertedEndDate(t.end_date),this.logo=t.logo,Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.data().location.latitude+","+e.data().location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g").then(e=>{let t=e.data.results[0].formatted_address;this.location=t;const a=`https://maps.google.com/?q=${t}`;this.location_link=a}).catch(e=>{console.log(e)}),m.collection("conferences").doc(this.$route.params.conference_id).collection("important_dates").get().then(e=>{e.empty||e.forEach(e=>{let t=e.data();const a=new Date(1e3*e.data().important_date.seconds);t.deadline=a.toISOString().substring(0,10),t.id=this.id,this.importantDates.push(t)})}).catch(e=>{console.log(e)})}else console.log("Taka konferencja nie istenieje!")})},watch:{search(e){e&&e!==this.select&&this.querySelections(e)}},computed:{preparedStartDate(){const e=new Date(this.start_date);if("string"===typeof this.start_time){let t=this.start_time.match(/^(\d+)/)[1],a=this.start_time.match(/:(\d+)/)[1];e.setHours(t),e.setMinutes(a)}else e.setHours(this.start_time.getHours()),e.setMinutes(this.start_time.getMinutes());return e},preparedEndDate(){const e=new Date(this.end_date);if("string"===typeof this.end_time){let t=this.end_time.match(/^(\d+)/)[1],a=this.end_time.match(/:(\d+)/)[1];e.setHours(t),e.setMinutes(a)}else e.setHours(this.end_time.getHours()),e.setMinutes(this.end_time.getMinutes());return e}},methods:{convertedStartDate(e){const t=new Date(1e3*e.seconds);this.start_date=t.toISOString().substring(0,10),this.start_time=t.toISOString().substring(11,16)},convertedEndDate(e){const t=new Date(1e3*e.seconds);this.end_date=t.toISOString().substring(0,10),this.end_time=t.toISOString().substring(11,16)},updateConference(){if(this.$refs.edit_form.validate()){const e={};if(null!=this.title&&""!==this.title&&(e.title=this.title),this.selectedCategory&&(e.category_id=this.selectedCategory),this.website&&(e.website=this.website),this.editorData&&(e.description=this.editorData),null!==this.select){const t=this.select.geometry.location.lat(),a=this.select.geometry.location.lng(),n=new c.a.firestore.GeoPoint(t,a);e.location=n}if(null!==this.start_date&&(e.start_date=this.preparedStartDate),null!==this.end_date&&(e.end_date=this.preparedEndDate),this.$admin&&(this.isAccepted=!0),e.isAccepted=this.isAccepted,this.isEmpty(e)||m.collection("conferences").doc(this.id).update(e).then(e=>{this.setSnackbar("success","Zaaktualizowano konferencje"),m.collection("conferences").doc(this.$route.params.conference_id).collection("important_dates").get().then(e=>{e.empty||e.forEach(e=>{m.collection("conferences").doc(this.$route.params.conference_id).collection("important_dates").doc(e.id).delete()});for(let t in this.importantDates)m.collection("conferences").doc(this.id).collection("important_dates").add({name:this.importantDates[t].name,important_date:new Date(this.importantDates[t].deadline)}).then(e=>{console.log("zaaktualizowano konferencje"),this.$router.push({name:"konferencja",params:{conference_id:this.id}})}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})}).catch(e=>{this.setSnackbar("error","Nie udało się zaaktualizować!"),console.log(e)}),null!==this.image){const e=this.image.name,t=e.substring(e.lastIndexOf("."),e.length);c.a.storage().refFromURL(this.logo).delete().then(()=>{console.log("usunieto obecne logo"),c.a.storage().ref("conferences/"+this.id+t).put(this.image).then(e=>{e.ref.getDownloadURL().then(e=>{m.collection("conferences").doc(this.id).update({logo:e}).then(e=>{console.log("pomyslnie edytowano konferencje"),this.$router.push({name:"konferencja",params:{conference_id:this.id}})})})})}).catch(e=>{console.log(e)})}}},isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})},querySelections(e){this.loading=!0;const t=new google.maps.places.PlacesService(document.createElement("div"));t.textSearch({query:e,fields:["name","geometry","formatted_address"]},(e,t)=>{t===google.maps.places.PlacesServiceStatus.OK&&(this.items=e,this.items.forEach(e=>{e.name=`${e.name}, ${e.formatted_address}`}))}),this.loading=!1},getCategories(){m.collection("categories").get().then(e=>{e.forEach(e=>{this.categories.push(e.id)})})},addImportantDate(){let e={};e.name=this.id_name,e.deadline=this.id_date,this.id_name=null,this.id_date=null,this.importantDates.push(e)},deleteImportantDate(e){this.importantDates.pop(e)},setSnackbar(e,t){this.color=e,this.text=t,this.icon="success"==e?"mdi-check-circle":"mdi-alert-circle",this.snackbar=!0}}},et=Ye,tt=(a("e4b4"),a("2fa4")),at=Object(h["a"])(et,Qe,Je,!1,null,null,null),nt=at.exports;_()(at,{VAutocomplete:ae["a"],VBtn:w["a"],VCard:Z["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCol:ne["a"],VDatePicker:Le["a"],VFileInput:We["a"],VForm:he["a"],VIcon:C["a"],VImg:H["a"],VMenu:I["a"],VRow:oe["a"],VSnackbar:ve["a"],VSpacer:tt["a"],VTextField:_e["a"],VTextarea:Ze["a"],VTimePicker:Ke["b"]});var it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"grey lighten-5"},[a("v-progress-linear",{staticClass:"mb-4",attrs:{active:e.loading,indeterminate:e.loading,color:"blue accent-4"}}),a("h2",{staticClass:"mb-3 subtitle-1 font-weight-black"},[e._v("Moje konferencje")]),a("v-row",e._l(e.conferences,(function(t,n){return a("v-col",{key:n,staticClass:"mb-5",attrs:{cols:"12",xs:"12",md:"4",xl:"3"}},[a("ConferenceThumbnail",{attrs:{conference:t}},[a("div",{staticClass:"pb-4",attrs:{slot:"floating-btn"},slot:"floating-btn"},[a("v-btn",{attrs:{fab:"",color:"blue accent-2",to:{name:"edytuj_konferencje",params:{conference_id:t.id}},top:"",right:"",absolute:""}},[a("v-icon",[e._v("mdi-pencil")])],1)],1)])],1)})),1)],1)},st=[],ot={components:{ConferenceThumbnail:Q},data(){return{conferences:[],loading:!1}},created(){let e=c.a.auth().currentUser;this.loading=!0,m.collection("conferences").where("user_id","==",e.uid).get().then(async e=>{let t=[];e.forEach(e=>{let a=e.data();a.id=e.id,t.push(a)}),this.conferences=t,this.loading=!1}),this.loading=!1}},rt=ot,lt=Object(h["a"])(rt,it,st,!1,null,null,null),ct=lt.exports;_()(lt,{VBtn:w["a"],VCol:ne["a"],VContainer:ie["a"],VIcon:C["a"],VProgressLinear:se["a"],VRow:oe["a"]});var dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"grey lighten-5"},[a("v-progress-linear",{staticClass:"mb-4",attrs:{active:e.loading,indeterminate:e.loading,color:"blue accent-4"}}),a("div",{staticClass:"d-flex justify-space-between"},[a("h2",{staticClass:"mb-3 subtitle-1 font-weight-black"},[e._v("Obserwowane konferencje")])]),a("v-row",e._l(e.conferences,(function(e,t){return a("v-col",{key:t,attrs:{cols:"12",xs:"12",md:"4",xl:"3"}},[a("ConferenceThumbnail",{attrs:{conference:e}})],1)})),1)],1)},ut=[],mt={components:{ConferenceThumbnail:Q},data(){return{conferences:[],loading:!0}},created(){this.getConferences()},methods:{getConferences(){c.a.auth().onAuthStateChanged(e=>{e&&m.doc(`users/${e.uid}`).collection("observed_conferences").get().then(e=>{e.forEach(e=>{m.collection("conferences").doc(e.id).get().then(async t=>{let a=t.data();a.id=e.id;const n=Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+a.location.latitude+","+a.location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g");let i=await n;a.address=i.data.results[0].formatted_address;const s=`https://maps.google.com/?q=${t.data().location.latitude},${a.location.longitude}`;a.link=s,this.conferences.push(a),this.loading=!1})})})}),this.loading=!1}}},pt=mt,ft=Object(h["a"])(pt,dt,ut,!1,null,null,null),ht=ft.exports;_()(ft,{VCol:ne["a"],VContainer:ie["a"],VProgressLinear:se["a"],VRow:oe["a"]});var vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"calendar_view mt-1"},[a("v-container",{staticClass:"grey lighten-5"},[a("v-row",{staticClass:"fill-height elevation-5"},[a("v-col",[a("v-sheet",{attrs:{height:"65"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:""},on:{click:e.setToday}},[e._v("Dzisiaj")]),a("v-btn",{attrs:{fab:"",text:"",small:""},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{attrs:{fab:"",text:"",small:""},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),a("v-toolbar-title",[e._v(e._s(e.title))]),a("div",{staticClass:"flex-grow-1"}),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{outlined:""}},n),[a("span",[e._v(e._s(e.typeToLabel[e.type]))]),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.type="day"}}},[a("v-list-item-title",[e._v("Dzień")])],1),a("v-list-item",{on:{click:function(t){e.type="week"}}},[a("v-list-item-title",[e._v("Tydzień")])],1),a("v-list-item",{on:{click:function(t){e.type="month"}}},[a("v-list-item-title",[e._v("Miesiąc")])],1),a("v-list-item",{on:{click:function(t){e.type="4day"}}},[a("v-list-item-title",[e._v("4 dni")])],1)],1)],1)],1)],1),a("v-sheet",{attrs:{height:"75vh"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,"event-margin-bottom":3,now:e.today,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay,change:e.updateRange},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"full-width":"","offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","max-width":"400px",flat:""}},[a("CalendarThumbnail",{attrs:{conference:e.selectedEvent}},[a("div",{attrs:{slot:"close-btn"},slot:"close-btn"},[a("v-btn",{attrs:{text:"",icon:"",color:"blue"},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[a("v-icon",[e._v("mdi-calendar-plus")])],1),a("v-btn",{staticClass:"ml-4",attrs:{text:"",icon:""},on:{click:function(t){e.selectedOpen=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)])],1),a("v-dialog",{attrs:{"max-width":"350px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("ExportConference",{attrs:{conference:e.conference}})],1)],1)],1)],1)],1)],1)],1)},_t=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"conference_thumbnail"},[a("v-card",{staticClass:"mx-auto"},[a("v-list-item",[a("v-list-item-content",[a("div",{staticClass:"d-flex justify-end"},[e._t("close-btn")],2),a("h2",{staticClass:"headline font-weight-medium pb-1"},[e._v(e._s(e.conference.title))]),a("p",{staticClass:"pb-2 caption"},[e._v("\n          "+e._s(e._f("dateFilter")(e.conference.start_date.toDate()))+"\n          "),e.notOneDay?a("span",[e._v("- "+e._s(e._f("dateFilter")(e.conference.end_date.toDate())))]):e._e()]),a("v-divider",{staticClass:"blue lighten-1"}),a("div",{staticClass:"location d-flex pt-2 pb-2 caption font-weight-medium grey--text"},[a("div",{staticClass:"location__icon"},[a("v-icon",[e._v("mdi-map-marker")])],1),a("div",{staticClass:"d-flex flex-column ml-1"},[a("div",{staticClass:"location__name"},[e._v(e._s(e.conference.location))]),a("div",{staticClass:"location__link"},[a("a",{staticClass:"font-weight-medium",attrs:{href:e.conference.link,target:"_blank"}},[e._v("zobacz na mapie")])])])])],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:"",to:{name:"konferencja",params:{conference_id:e.conference.id}},color:"blue accent-4"}},[e._v("więcej informacji")])],1)],1)],1)},bt=[],kt={props:["conference"],data(){return{notOneDay:!0}},created(){let e=this.conference.start_date.toDate(),t=this.conference.end_date.toDate();e.toISOString().substring(0,10)==t.toISOString().substring(0,10)&&(this.notOneDay=!1)}},wt=kt,xt=Object(h["a"])(wt,gt,bt,!1,null,null,null),Ct=xt.exports;_()(xt,{VBtn:w["a"],VCard:Z["a"],VCardActions:K["a"],VDivider:x["a"],VIcon:C["a"],VListItem:D["a"],VListItemContent:V["a"]});var yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"350",tile:""}},[a("v-list",{attrs:{flat:""}},[a("v-subheader",{staticClass:"title text-center"},[e._v("Dodaj do kalendarza")]),a("v-divider"),a("v-list-item-group",{attrs:{exact:""}},[a("v-list-item",{on:{click:e.addToGoogleCalendar}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-google")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Google Calendar")])],1)],1),a("v-list-item",{on:{click:e.downloadIcsFile}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-calendar-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("iCalendar")])],1)],1)],1)],1)],1)},Dt=[],Vt={props:["conference"],data(){return{}},methods:{addToGoogleCalendar(){let e=new Date(this.conference.start_date),t=new Date(this.conference.end_date),a=e.toISOString().replace(/-|:|/g,"").substring(0,15)+"Z",n=t.toISOString().replace(/-|:|/g,"").substring(0,15)+"Z";const i=`https://calendar.google.com/calendar/r/eventedit?location=${encodeURIComponent(this.conference.location)}\n      &text=${encodeURIComponent(this.conference.title)}&dates=${a}/${n}&details=${encodeURIComponent("Więcej informacji: http://localhost:8080/#/konferencja/")}${this.conference.id}`;window.open(i,"_blank")},downloadIcsFile(){var e=new Blob([`BEGIN:VCALENDAR\nVERSION:2.0\nMETHOD:PUBLISH\nBEGIN:VEVENT\nSUMMARY:${this.conference.title}\nDTSTART:${this.conference.start_date}\nDTEND:${this.conference.end_date}\nLOCATION:${this.conference.location}\nDESCRIPTION: Więcej informacji: http://localhost:8080/#/konferencja/${this.conference.id}\nURL:http://localhost:8080/#/konferencja/${this.conference.id}\nEND:VEVENT\nEND:VCALENDAR\n`],{type:"text/plain;charset=utf-8"});const t=this.conference.title+".ics";saveAs(e,t)}}},jt=Vt,St=a("e0c7"),It=Object(h["a"])(jt,yt,Dt,!1,null,null,null),zt=It.exports;_()(It,{VCard:Z["a"],VDivider:x["a"],VIcon:C["a"],VList:y["a"],VListItem:D["a"],VListItemContent:V["a"],VListItemGroup:j["a"],VListItemIcon:S["a"],VListItemTitle:V["b"],VSubheader:St["a"]});var $t={components:{CalendarThumbnail:Ct,ExportConference:zt},data:()=>({dialog:!1,today:Date.now(),focus:Date.now().toString(),type:"month",typeToLabel:{month:"Miesiąc",week:"Tydzień",day:"Dzień","4day":"4 Dni"},start:null,end:null,conference:{},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[]}),computed:{title(){const{start:e,end:t}=this;if(!e||!t)return"";const a=this.monthFormatter(e),n=this.monthFormatter(t),i=a===n?"":n,s=e.year,o=t.year,r=s===o?"":o,l=e.day,c=t.day;switch(this.type){case"month":return`${a} ${s}`;case"week":case"4day":return s!==o?`${a} ${l} ${s} - ${i} ${c} ${r}`:`${a} ${l} - ${c} ${i} ${s} ${r}`;case"day":return`${a} ${l} ${s}`}return""},monthFormatter(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}},mounted(){this.$refs.calendar.checkChange()},methods:{addToGoogleCalendar(e){let t=new Date(e.start),a=new Date(e.end),n=t.toISOString().replace(/-|:|/g,"").substring(0,15)+"Z",i=a.toISOString().replace(/-|:|/g,"").substring(0,15)+"Z";const s=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${e.title}&dates=${n}/${i}&details=${e.description}`;window.open(s,"_blank")},convertedStartDate(e){const t=new Date(1e3*e.seconds);return t.toISOString().substring(0,16)},convertedEndDate(e){const t=new Date(1e3*e.seconds);return t.toISOString().substring(0,16)},viewDay({date:e}){this.focus=e,this.type="day"},getEventColor(e){return e.color},setToday(){this.focus=this.today},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},showEvent({nativeEvent:e,event:t}){const a=()=>{this.selectedEvent=t,this.conference.id=t.id,this.conference.title=t.title,this.conference.start_date=new Date(1e3*t.start_date.seconds).toISOString(),this.conference.end_date=new Date(1e3*t.end_date.seconds).toISOString(),this.conference.location=t.location,this.conference.link=t.link,this.conference.description=t.description,this.conference.logo=t.logo,this.selectedElement=e.target,setTimeout(()=>this.selectedOpen=!0,10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(a,10)):a(),e.stopPropagation()},updateRange({start:e,end:t}){this.start=e,this.end=t}},created(){this.today=(new Date).toISOString().slice(0,10),m.collection("conferences").where("isAccepted","==",!0).get().then(e=>{e.forEach(e=>{Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.data().location.latitude+","+e.data().location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g").then(t=>{let a=t.data.results[0].formatted_address,n=e.data();n.id=e.id,n.location=a;const i=`https://maps.google.com/?q=${a}`;n.link=i,n.name=n.title,n.details="szczegoly",n.start=this.convertedStartDate(e.data().start_date),n.end=this.convertedStartDate(e.data().end_date),n.color="blue",this.events.push(n)}).catch(e=>{console.log(e)})})})}},Tt=$t,Et=(a("473b"),a("a4f6")),At=a("8dd9"),Ot=a("71d9"),Pt=Object(h["a"])(Tt,vt,_t,!1,null,null,null),Lt=Pt.exports;_()(Pt,{VBtn:w["a"],VCalendar:Et["a"],VCard:Z["a"],VCol:ne["a"],VContainer:ie["a"],VDialog:xe["a"],VIcon:C["a"],VList:y["a"],VListItem:D["a"],VListItemTitle:V["b"],VMenu:I["a"],VRow:oe["a"],VSheet:At["a"],VToolbar:Ot["a"],VToolbarTitle:$["a"]});var Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin_panel"},[a("v-card",[a("v-tabs",{attrs:{"background-color":"transparent",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Konferencje")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("div",{staticClass:"mt-5"},[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loading,"loading-text":"trwa ładowanie",headers:e.headersConferences,items:e.conferences,"sort-by":"isAccepted"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:e.editConferenceDialog,callback:function(t){e.editConferenceDialog=t},expression:"editConferenceDialog"}},[a("EditConference")],1)]},proxy:!0},{key:"item.preview",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",to:{name:"konferencja",params:{conference_id:n.id}},color:"blue accent-4"}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-eye-outline")])],1)]}},{key:"item.action",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editConference(n)}}},[e._v("mdi-pencil")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteConference(n)}}},[e._v("mdi-delete")])]}},{key:"item.isAccepted",fn:function(t){var n=t.item;return[a("v-chip",{attrs:{color:e.getColor(n.isAccepted),dark:""}},[e._v(e._s(n.isAccepted))])]}}])})],1)])],1)],1)],1)},Rt=[],Bt=(a("8934"),{components:{EditConference:nt},data(){return{email:null,tab:null,editConferenceDialog:!1,loading:!0,feedback:null,conferences:[],headersConferences:[{text:"Przejdź",align:"center",sortable:!1,value:"preview"},{text:"Tytuł",align:"left",sortable:!1,value:"title"},{text:"Status",value:"isAccepted"},{text:"Data rozpoczęcia",value:"start_date"},{text:"Data zakończenia",value:"end_date"},{text:"Lokalizacja",value:"location"},{text:"Akcje",value:"action",sortable:!1}],editedIndex:-1}},computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},created(){m.collection("conferences").get().then(e=>{e.forEach(e=>{Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.data().location.latitude+","+e.data().location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g").then(t=>{let a=t.data.results[0].formatted_address,n=e.data();n.location=a;const i=`https://maps.google.com/?q=${a}`;n.link=i,n.id=e.id,n.start_date=e.data().start_date.toDate().toLocaleString(),n.end_date=e.data().end_date.toDate().toLocaleString(),n.isAccepted="true"===String(e.data().isAccepted)?"zaakceptowano":"oczekuje",this.conferences.push(n),this.loading=!1}).catch(e=>{console.log(e)})})})},methods:{getColor(e){return"zaakceptowano"===e?"green":"red"},editConference(e){this.$router.push({name:"edytuj_konferencje",params:{conference_id:e.id}})},deleteConference(e){const t=this.conferences.indexOf(e);confirm("Czy na pewno chcesz usunąć konferencje?")&&m.collection("conferences").doc(e.id).delete().then(()=>{this.conferences.splice(t,1),console.log("Konferencja usunięta"),c.a.storage().refFromURL(e.logo).delete().then(()=>{console.log("usunieto logo")}).catch(e=>{console.log(e)})}).catch(e=>{console.error(e)})}}}),Ut=Bt,Ft=(a("55cf"),a("cc20")),Mt=a("8fea"),qt=a("71a3"),Gt=a("c671"),Wt=a("fe57"),Zt=a("aac8"),Kt=Object(h["a"])(Ut,Nt,Rt,!1,null,null,null),Ht=Kt.exports;_()(Kt,{VBtn:w["a"],VCard:Z["a"],VChip:Ft["a"],VDataTable:Mt["a"],VDialog:xe["a"],VIcon:C["a"],VTab:qt["a"],VTabItem:Gt["a"],VTabs:Wt["a"],VTabsItems:Zt["a"]});var Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"conference-page"},[e.exist?a("div",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{lg:"auto"}},[a("v-card",{staticClass:"mx-auto",attrs:{outlined:"",width:"800px"}},[e.$admin?a("div",{staticClass:"d-flex justify-center mt-4"},[a("v-btn",{attrs:{color:e.acceptColor,dark:""},on:{click:e.updateAccepted}},[e.isAccepted?e._e():a("v-icon",{attrs:{left:""}},[e._v("mdi-check-circle-outline")]),e.isAccepted?a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]):e._e(),e._v("\n                "+e._s(e.acceptText)+"\n              ")],1)],1):e._e(),a("v-card-text",{staticClass:"headline font-weight-light mt-2 black--text"},[e._v(e._s(e.title))]),a("div",{staticClass:"d-flex justify-space-between"},[a("v-chip",{staticClass:"ma-2",attrs:{color:"blue lighten-1",label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-label")]),e._v("\n                "+e._s(e.category_id)+"\n              ")],1),e.user?a("v-chip",{staticClass:"ma-2",attrs:{color:"orange darken-1","text-color":"white"},on:{click:e.updateObserved}},[e.isObserved?e._e():a("v-icon",{attrs:{left:""}},[e._v("mdi-star")]),e._v("\n                "+e._s(e.observeText)+"\n              ")],1):e._e()],1),a("v-img",{attrs:{src:e.logo,height:"auto"}}),a("div",{staticClass:"text-primary pa-3 mt-5",attrs:{id:"description_content"}})],1)],1),a("v-col",{attrs:{lg:"auto"}},[a("v-card",{staticClass:"mx-auto",attrs:{outlined:"",width:"400"}},[a("div",{staticClass:"d-flex flex-row pa-5"},[a("v-icon",{staticClass:"pr-3",attrs:{color:"blue",large:""}},[e._v("mdi-calendar")]),a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"body-1"},[e._v(e._s(e._f("dateFilter")(e.start_date))+" - "+e._s(e._f("dateFilter")(e.end_date)))]),a("a",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("dodaj do kalendarza")])])],1),a("v-divider",{staticClass:"blue lighten-1"}),a("div",{staticClass:"d-flex flex-row pa-5"},[a("v-icon",{staticClass:"pr-3",attrs:{color:"blue",large:""}},[e._v("mdi-map-marker-radius")]),a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"body-1"},[e._v(e._s(e.location))]),a("a",{staticClass:"body-2",attrs:{href:e.link,target:"_blank"}},[e._v("zobacz na mapie")])])],1),e.website?a("v-divider",{staticClass:"blue lighten-1"}):e._e(),e.website?a("div",{staticClass:"d-flex flex-row pa-5 justify-center"},[a("v-chip",{staticClass:"ma-2",attrs:{color:"primary",href:e.website,target:"_blank",outlined:"",link:"",pill:""}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-web")]),e._v("strona internetowa\n              ")],1)],1):e._e()],1),e.importantDates[0]?a("v-card",{staticClass:"mx-auto mt-6",attrs:{outlined:"",width:"400"}},[a("v-card-title",{staticClass:"d-block title text-center font-weight-regular"},[e._v("Ważne daty")]),a("v-divider",{staticClass:"blue lighten-1"}),e._l(e.importantDates,(function(e,t){return a("div",{key:t,staticClass:"d-flex flex-row pa-5"},[a("ImportantDateView",{attrs:{importantDate:e}})],1)}))],2):e._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"350px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("ExportConference",{attrs:{conference:e.conference}})],1)],1):e._e(),e.noExist?a("div",{staticClass:"description_content"},[a("h2",[e._v("Nie znaleziono konferencji")])]):e._e()])},Qt=[],Jt=(a("21a6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"idv"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"d-flex mb-1"},[a("v-icon",{attrs:{color:"blue"}},[e._v("mdi-alert-rhombus-outline")]),a("span",{staticClass:"sub-title1 font-weight-regular ml-1"},[e._v(e._s(e.importantDate.name))])],1),a("div",[a("v-icon",{attrs:{small:""}},[e._v("mdi-calendar")]),a("span",{staticClass:"ml-1 body-2"},[e._v(e._s(e._f("dateFilter")(e.importantDate.important_date.toDate())))])],1),a("a",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("dodaj do kalendarza")])]),a("v-dialog",{attrs:{"max-width":"350px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("ExportImportantDate",{attrs:{importantDate:e.importantDate}})],1)],1)}),Yt=[],ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"350",tile:""}},[a("v-list",{attrs:{flat:""}},[a("v-subheader",{staticClass:"title text-center"},[e._v("Dodaj do kalendarza")]),a("v-divider"),a("v-list-item-group",{attrs:{exact:""}},[a("v-list-item",{on:{click:e.addToGoogleCalendar}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-google")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Google Calendar")])],1)],1),a("v-list-item",{on:{click:e.downloadIcsFile}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-calendar-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("iCalendar")])],1)],1)],1)],1)],1)},ta=[],aa={props:["importantDate"],data(){return{}},methods:{addToGoogleCalendar(){console.log(this.importantDate.important_date);let e=new Date(1e3*this.importantDate.important_date.seconds),t=e.toISOString().replace(/-|:|/g,"").substring(0,15)+"Z";const a=`https://calendar.google.com/calendar/r/eventedit?location=${encodeURIComponent(this.importantDate.location)}&text=${encodeURIComponent(this.importantDate.name)}&dates=${t}/${t}&details=${encodeURIComponent("Więcej informacji: http://localhost:8080/#/konferencja/")}${this.importantDate.id}`;window.open(a,"_blank")},downloadIcsFile(){let e=new Date(1e3*this.importantDate.important_date.seconds);var t=new Blob([`BEGIN:VCALENDAR\nVERSION:2.0\nMETHOD:PUBLISH\nBEGIN:VEVENT\nSUMMARY:${this.importantDate.name}\nDTSTART:${e.toISOString()}\nDTEND:${e.toISOString()}\nLOCATION:${this.importantDate.location}\nGEO:${this.importantDate.geo.latitude};${this.importantDate.geo.longitude}\nDESCRIPTION: Więcej informacji: http://localhost:8080/#/konferencja/${this.importantDate.id}\nURL:http://localhost:8080/#/konferencja/${this.importantDate.id}\nEND:VEVENT\nEND:VCALENDAR\n`],{type:"text/plain;charset=utf-8"});const a=this.importantDate.name+".ics";saveAs(t,a)}}},na=aa,ia=Object(h["a"])(na,ea,ta,!1,null,null,null),sa=ia.exports;_()(ia,{VCard:Z["a"],VDivider:x["a"],VIcon:C["a"],VList:y["a"],VListItem:D["a"],VListItemContent:V["a"],VListItemGroup:j["a"],VListItemIcon:S["a"],VListItemTitle:V["b"],VSubheader:St["a"]});var oa={props:["importantDate"],components:{ExportImportantDate:sa},data(){return{dialog:!1}}},ra=oa,la=Object(h["a"])(ra,Jt,Yt,!1,null,null,null),ca=la.exports;_()(la,{VDialog:xe["a"],VIcon:C["a"]});var da={components:{ExportConference:zt,ImportantDateView:ca},data(){return{dialog:!1,exist:!1,noExist:!1,id:null,title:null,start_date:null,start_time:null,end_date:null,end_time:null,location:null,website:null,geo:null,link:null,description:null,logo:"",feedback:null,image:null,conference:{},importantDates:[],user:null,isObserved:!1,observeText:"Obserwuj",isAccepted:!1,acceptText:"Zaakceptuj",acceptColor:"green"}},created(){c.a.auth().onAuthStateChanged(e=>{this.user=e,e&&m.doc(`users/${e.uid}`).collection("observed_conferences").doc(this.id).get().then(e=>{e.exists?(this.isObserved=!0,this.observeText="Przestań obserwować"):(this.isObserved=!1,this.observeText="Obserwuj")})}),this.id=this.$route.params.conference_id,m.collection("conferences").doc(this.$route.params.conference_id).get().then(e=>{if(e.exists){let t=e.data();this.exist=!0,this.isAccepted=t.isAccepted,this.title=t.title,this.category_id=t.category_id,this.website=t.website,this.description=t.description,this.start_date=t.start_date.toDate(),this.end_date=t.end_date.toDate(),this.logo=t.logo,this.geo=t.location,this.isAccepted?this.setIsNotAccepted():this.setAccepted(),Y.a.post("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.data().location.latitude+","+e.data().location.longitude+"&key=AIzaSyB5LXSCIoz7k6hBQ-Gcfx_T-X_oVM72K5g").then(e=>{let t="";this.location=t;const a=`https://maps.google.com/?q=${t}`;this.link=a,this.conference.id=this.id,this.conference.isAccepted=this.isAccepted,this.conference.title=this.title,this.conference.start_date=this.start_date.toISOString(),this.conference.end_date=this.end_date.toISOString(),this.conference.location=this.location,this.conference.link=this.link,document.getElementById("description_content").innerHTML=this.description,this.conference.logo=this.logo,this.conference.geo=this.geo,document.querySelectorAll("oembed[url]").forEach(e=>{iframely.load(e,e.attributes.url.value)})}).catch(e=>{console.log(e)}),m.collection("conferences").doc(this.$route.params.conference_id).collection("important_dates").get().then(e=>{e.empty||e.forEach(e=>{let t=e.data();t.location=this.conference.location,t.geo=this.conference.geo,t.id=this.conference.id,this.importantDates.push(t)})}).catch(e=>{console.log(e)})}else this.noExist=!0,console.log("Taka konferencja nie istenieje!")})},methods:{setAccepted(){this.isAccepted=!1,this.acceptText="Zaakceptuj",this.acceptColor="green"},setIsNotAccepted(){this.isAccepted=!0,this.acceptText="Anuluj akceptację",this.acceptColor="red"},updateAccepted(){this.isAccepted?m.collection("conferences").doc(this.id).update({isAccepted:!1}).then(()=>{this.isAccepted=!1,this.acceptText="Zaakceptuj",this.acceptColor="green"}).catch(e=>{console.log(e)}):m.collection("conferences").doc(this.id).update({isAccepted:!0}).then(()=>{this.isAccepted=!0,this.acceptText="Anuluj akceptację",this.acceptColor="red"}).catch(e=>{console.log(e)})},updateObserved(){this.isObserved?m.doc(`users/${this.user.uid}`).collection("observed_conferences").doc(this.id).delete().then(()=>{this.isObserved=!1,this.observeText="Obserwuj"}).catch(e=>{console.log(e)}):this.user&&m.doc(`users/${this.user.uid}`).collection("observed_conferences").doc(this.id).set({}).then(()=>{this.isObserved=!0,this.observeText="Przestań obserwować"}).catch(e=>{console.log(e)})}}},ua=da,ma=Object(h["a"])(ua,Xt,Qt,!1,null,null,null),pa=ma.exports;_()(ma,{VBtn:w["a"],VCard:Z["a"],VCardText:K["b"],VCardTitle:K["c"],VChip:Ft["a"],VCol:ne["a"],VContainer:ie["a"],VDialog:xe["a"],VDivider:x["a"],VIcon:C["a"],VImg:H["a"],VRow:oe["a"]});var fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-profile mx-auto"},[a("v-progress-linear",{staticClass:"mb-4",attrs:{active:e.loading,indeterminate:e.loading,color:"blue accent-4"}}),e.profile?a("v-card",{staticClass:"mb-5 pa-10",attrs:{"max-width":"800px"}},[a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"avatar"},[a("v-avatar",{staticClass:"avatar__img",attrs:{size:"200"},on:{click:function(t){return e.$refs.imageInput.click()}}},[a("img",{attrs:{src:e.avatarSrc}})]),e.isOwner?a("a",{staticClass:"d-block text-center mt-3",on:{click:function(t){return e.$refs.imageInput.click()}}},[e._v("zmień avatar")]):e._e(),e.isOwner?a("input",{ref:"imageInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.onImageSelected}}):e._e()],1),a("div",{staticClass:"user-info ml-10"},[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"username d-flex flex-row"},[a("h2",{staticClass:"mb-4 mr-5 headline"},[e._v(e._s(e.profile.username))]),e.isOwner?a("v-btn",{attrs:{small:"",dark:"",color:"blue",outlined:""},on:{click:function(t){e.showSettings=!e.showSettings}}},[e._v("Ustawienia")]):e._e()],1),a("p",{staticClass:"subtitle-1 font-weight-medium"},[e._v(e._s(e.profile.fullname))]),a("p",{attrs:{clas:"subtitle-1"}},[e._v(e._s(e.profile.bio))])])])])]):e._e(),a("v-expand-transition",[e.isOwner&&e.showSettings?a("v-card",{attrs:{"max-width":"800px"}},[a("v-tabs",{attrs:{vertical:""}},[a("v-tab",{staticClass:"tab"},[a("v-icon",{attrs:{left:""}},[e._v("mdi-account")]),e._v("Edycja profilu\n        ")],1),a("v-tab",{staticClass:"tab"},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock")]),e._v("Zmień hasło\n        ")],1),a("v-tab",{staticClass:"tab"},[a("v-icon",{attrs:{left:""}},[e._v("mdi-access-point")]),e._v("Zmień Email\n        ")],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.updateProfile(t)}}},[a("v-text-field",{attrs:{outlined:"",label:"Nazwa użytkownika"},model:{value:e.profile.username,callback:function(t){e.$set(e.profile,"username",t)},expression:"profile.username"}}),a("v-text-field",{attrs:{outlined:"",label:"Imię i nazwisko"},model:{value:e.profile.fullname,callback:function(t){e.$set(e.profile,"fullname",t)},expression:"profile.fullname"}}),a("v-textarea",{attrs:{outlined:"",label:"Biogram"},model:{value:e.profile.bio,callback:function(t){e.$set(e.profile,"bio",t)},expression:"profile.bio"}}),a("v-btn",{attrs:{type:"submit",color:"blue",dark:""}},[e._v("Zapisz")]),a("br"),a("br")],1)],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[a("v-text-field",{attrs:{outlined:"",type:"password",label:"Aktualne hasło"},model:{value:e.currentPassword,callback:function(t){e.currentPassword=t},expression:"currentPassword"}}),a("v-text-field",{attrs:{outlined:"",type:"password",label:"Nowe hasło"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("p",{staticClass:"text-left font-weight-medium mb-8"},[a("a",{on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("Zapomniałem hasła")])]),a("v-btn",{attrs:{type:"submit",color:"blue",dark:""}},[e._v("Zapisz")]),a("br"),a("br")],1)],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.changeEmail(t)}}},[a("v-text-field",{attrs:{outlined:"",label:"Adres Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{outlined:"",type:"password",label:"Podaj aktualne hasło"},model:{value:e.currentPasswordEmailTab,callback:function(t){e.currentPasswordEmailTab=t},expression:"currentPasswordEmailTab"}}),a("v-btn",{attrs:{type:"submit",color:"blue",dark:""}},[e._v("Zapisz")]),a("br"),a("br")],1)],1)],1)],1)],1)],1):e._e()],1),e.currentUser?a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("ResetPassword",{attrs:{uemail:e.currentUser.email},on:{resetPasswordSent:e.setSnackbar}})],1):e._e(),a("v-snackbar",{attrs:{color:e.color,top:"",timeout:e.timeout},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("div",[a("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.icon))]),e._v("\n      "+e._s(e.text)+"\n    ")],1),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],1)},ha=[],va={components:{ResetPassword:be},data(){return{profile:null,isOwner:!1,showSettings:!0,currentUser:null,dialog:!1,snackbar:!1,color:"",icon:"",text:"",timeout:5e3,currentPassword:null,currentPasswordEmailTab:null,email:null,newPassword:null,selectedImage:null,avatarSrc:"https://firebasestorage.googleapis.com/v0/b/konferencje-95600.appspot.com/o/avatars%2FdefaultAvatar.png?alt=media&token=f5fbdbef-b80e-41e5-bf48-e99b0d6f91a6",loading:!0}},created(){c.a.auth().currentUser;c.a.auth().onAuthStateChanged(e=>{e&&m.collection("users").where("username","==",this.$route.params.username).get().then(t=>{t.forEach(t=>{this.profile=t.data(),this.profile.logo&&(this.avatarSrc=this.profile.logo),t.data().user_id===e.uid&&(this.isOwner=!0,this.currentUser=e,this.email=e.email),this.loading=!1})})}),this.loading=!1},methods:{onImageSelected(e){var t=c.a.auth().currentUser;if(this.selectedImage=e.target.files[0],this.selectedImage){const e=this.selectedImage.name,a=e.substring(e.lastIndexOf("."),e.length);this.profile.logo?c.a.storage().refFromURL(this.profile.logo).delete().then(()=>{c.a.storage().ref("avatars/"+t.uid+a).put(this.selectedImage).then(e=>{e.ref.getDownloadURL().then(e=>{m.collection("users").doc(t.uid).update({logo:e}).then(t=>{this.avatarSrc=e,this.profile.logo=e,Ia.$emit("updateAvatar",e),this.setSnackbar2("success","Avatar został zmieniony!")})})})}).catch(e=>{console.log(e),this.setSnackbar2("error","Nie udało się zmienić avataru!")}):c.a.storage().ref("avatars/"+t.uid+a).put(this.selectedImage).then(e=>{e.ref.getDownloadURL().then(e=>{m.collection("users").doc(t.uid).update({logo:e}).then(t=>{this.avatarSrc=e,this.profile.logo=e,Ia.$emit("updateAvatar",e),this.setSnackbar2("success","Avatar został zmieniony!")})})})}},updateProfile(){const e={};null!=this.profile.username&&""!==this.profile.username&&(e.username=this.profile.username),null!=this.profile.fullname&&""!==this.profile.fullname&&(e.fullname=this.profile.fullname),null!=this.profile.bio&&""!==this.profile.bio&&(e.bio=this.profile.bio),m.collection("users").doc(this.currentUser.uid).update(e).then(e=>{this.color="success",this.icon="mdi-check-circle",this.text="Pomyślnie edytowano profil!",this.snackbar=!0})},changePassword(){let e=c.a.auth().currentUser,t=this.newPassword;const a=c.a.auth.EmailAuthProvider.credential(e.email,this.currentPassword);e.reauthenticateWithCredential(a).then(()=>{c.a.auth().currentUser.updatePassword(t).then(()=>{this.setSnackbar2("success","Hasło zostało zmienione!"),this.currentPassword="",this.newPassword=""}).catch(e=>{console.log(e),this.setSnackbar2("error","Nie udało się zmienić hasła!"),this.currentPassword=""})}).catch(e=>{console.log(e),this.setSnackbar2("error","Nie udało się zmienić hasła!"),this.currentPassword=""})},changeEmail(){let e=c.a.auth().currentUser;this.newPassword;const t=c.a.auth.EmailAuthProvider.credential(e.email,this.currentPasswordEmailTab);e.reauthenticateWithCredential(t).then(()=>{c.a.auth().currentUser.updateEmail(this.email).then(()=>{this.setSnackbar2("success","Adres email został zmieniony!"),this.currentPassword=""}).catch(e=>{console.log(e),this.setSnackbar2("error","Nie udało się zmienić adresu email!"),this.currentPassword=""})}).catch(e=>{console.log(e),this.setSnackbar2("error","Nie udało się zmienić adresu email!"),this.currentPassword=""})},setSnackbar(){this.dialog=!1,this.color="success",this.icon="mdi-check-circle",this.text="Pomyślnie wysłano wiadomość!",this.snackbar=!0},setSnackbar2(e,t){this.color=e,this.text=t,this.icon="success"==e?"mdi-check-circle":"mdi-alert-circle",this.snackbar=!0}}},_a=va,ga=(a("79cc"),a("0789")),ba=Object(h["a"])(_a,fa,ha,!1,null,null,null),ka=ba.exports;_()(ba,{VAvatar:k["a"],VBtn:w["a"],VCard:Z["a"],VCardText:K["b"],VDialog:xe["a"],VExpandTransition:ga["a"],VForm:he["a"],VIcon:C["a"],VProgressLinear:se["a"],VSnackbar:ve["a"],VTab:qt["a"],VTabItem:Gt["a"],VTabs:Wt["a"],VTextField:_e["a"],VTextarea:Ze["a"]}),n["a"].use(B["a"]);const wa=new B["a"]({routes:[{path:"/",name:"home",component:le},{path:"/logowanie",name:"logowanie",component:ye,meta:{lockIfUserLogedIn:!0}},{path:"/rejestracja",name:"rejestracja",component:ze,meta:{lockIfUserLogedIn:!0}},{path:"/dodaj_konferencje",name:"dodaj_konferencje",component:Xe,meta:{requireAuth:!0}},{path:"/edytuj_konferencje/:conference_id",name:"edytuj_konferencje",component:nt,meta:{requireAuth:!0}},{path:"/moje_konferencje",name:"moje_konferencje",component:ct,meta:{requireAuth:!0}},{path:"/obserwowawne_konferencje",name:"obserwowane_konferencje",component:ht,meta:{requireAuth:!0}},{path:"/konferencja/:conference_id",name:"konferencja",component:pa},{path:"/kalendarz",name:"kalendarz",component:Lt},{path:"/profil/:username",name:"profil",component:ka,meta:{requireAuth:!0}},{path:"/admin_panel",name:"admin_panel",component:Ht,beforeEnter:(e,t,a)=>{let n=c.a.auth().currentUser;n.getIdTokenResult().then(e=>{e.claims.admin?a():a(!1)})}}]});wa.beforeEach((e,t,a)=>{if(e.matched.some(e=>e.meta.lockIfUserLogedIn)){let e=c.a.auth().currentUser;e?a(!1):a()}else a()}),wa.beforeEach((e,t,a)=>{if(e.matched.some(e=>e.meta.requireAuth)){let e=c.a.auth().currentUser;e?a():a(!1)}else a()});var xa=wa,Ca=a("2f62");n["a"].use(Ca["a"]);var ya=new Ca["a"].Store({state:{},mutations:{},actions:{}}),Da=a("f309"),Va=a("7597");n["a"].use(Da["a"]);var ja=new Da["a"]({icons:{iconfont:"mdi"},lang:{locales:{pl:Va["a"]},current:"pl"}}),Sa=e=>{const t=new Date(e),a=t.getFullYear(),n=t.getDay(),i=t.getMonth(),s=t.getDate(),o=["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październk","Listopad","Grudzień"],r=["Pon","Wt","Śr","Czw","Pt","Sob","Niedz"];return`${r[n]}, ${s} ${o[i]} ${a}`};a.d(t,"bus",(function(){return Ia})),n["a"].config.productionTip=!1;const Ia=new n["a"];n["a"].filter("dateFilter",Sa);let za=null;c.a.auth().onAuthStateChanged(e=>{e?e.getIdTokenResult().then(e=>{n["a"].prototype.$admin=e.claims.admin}):n["a"].prototype.$admin=!1,za||(za=new n["a"]({router:xa,store:ya,vuetify:ja,render:e=>e(R)}).$mount("#app"))})},6887:function(e,t,a){"use strict";var n=a("8ac7"),i=a.n(n);i.a},7206:function(e,t,a){},"79cc":function(e,t,a){"use strict";var n=a("3da5"),i=a.n(n);i.a},"7c6e":function(e,t,a){},"8ac7":function(e,t,a){},b2fe:function(e,t,a){"use strict";var n=a("3ec0"),i=a.n(n);i.a},cccb:function(e,t,a){"use strict";var n=a("4e69"),i=a.n(n);i.a},d4e0:function(e,t,a){"use strict";var n=a("fbd3"),i=a.n(n);i.a},dc91:function(e,t,a){},e4b4:function(e,t,a){"use strict";var n=a("313b"),i=a.n(n);i.a},fbd3:function(e,t,a){}});
//# sourceMappingURL=app.8d1e3f0a.js.map